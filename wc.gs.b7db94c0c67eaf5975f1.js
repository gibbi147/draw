webpackJsonp(["wc.gs"],{86:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(70),n=s(0),o=s.n(n),r=s(55),i=s.n(r),l=s(97),c=s.n(l),u=s(174),m=(s.n(u),s(50)),p=(s.n(m),s(42)),h=(s.n(p),s(57)),d=s(47),g=s(58),T=s(114),P=s(59),k=s(60),b=s(61),w=s(62),G=s(46),N=s(118),f=s.n(N);t.default=class extends n.PureComponent{constructor(e){super(e),this.onReset=(()=>{this.reset(!1)}),this.onInit=(()=>{const{pots:e,currentPotNum:t}=this.state,s=e[t].findIndex(e=>e.host);this.onTeamBallPick(s)}),this.onTeamBallPick=(e=>{const{groups:t,pots:s,currentPotNum:a}=this.state,n=s[a],o=n.slice(),r=n.splice(e,1)[0];this.setState({hungPot:o,selectedTeam:r,pickedGroup:null,calculating:!0},()=>{this.setLongCalculating(this.state)}),this.worker.postMessage({pots:s,groups:t,selectedTeam:r,currentPotNum:a})}),this.workerOnMessage=(e=>{const{selectedTeam:t,pickedGroup:s}=e.data,{groups:a,pots:n,currentPotNum:o}=this.state;a[s].push(t);const r=n[o].length>0?o:o+1,i=r>=n.length;i&&this.worker.terminate(),this.state.airborneTeams.push(t);const l=this.animateCell(t,s);this.setState({groups:a,selectedTeam:null,pickedGroup:s,hungPot:n[r],currentPotNum:r,calculating:!1,longCalculating:!1,completed:i,airborneTeams:this.state.airborneTeams},async()=>{await l,this.setState({airborneTeams:this.state.airborneTeams.filter(e=>e!==t)})})}),this.reset(!0)}componentWillMount(){this.onInit()}componentWillUnmount(){this.worker&&this.worker.terminate()}reset(e){this.worker&&this.worker.terminate(),this.worker=new f.a,this.worker.onmessage=this.workerOnMessage;const t=this.props.pots,s=t.map(e=>m(e)),a=s[0],n={drawId:p("draw-"),initialPots:t,pots:s,groups:a.map(e=>[]),maxTeamsInGroup:s.length,airborneTeams:[],currentPotNum:0,selectedTeam:null,pickedGroup:null,hungPot:a,calculating:!1,longCalculating:!1,completed:!1,error:null};e?this.state=n:this.setState(n,this.onInit)}async setLongCalculating(e){var{airborneTeams:t}=e,s=a.a(e,["airborneTeams"]);await i()(3e3);const n=u(this.state,"airborneTeams");c()(n,s)&&this.setState({longCalculating:!0})}animateCell(e,t){const{currentPotNum:s}=this.state;if(!e)return;const a=document.querySelector(`[data-cellid='${e.id}']`),n=`[data-cellid='${Object(d.a)(t)}${s}']`,o=document.querySelector(n);return a instanceof HTMLElement&&o instanceof HTMLElement?Object(h.a)(a,o,350):void 0}render(){const{initialPots:e,pots:t,groups:s,maxTeamsInGroup:a,currentPotNum:n,hungPot:r,airborneTeams:i,selectedTeam:l,pickedGroup:c,calculating:u,longCalculating:m,completed:p}=this.state;return o.a.createElement(G.default,null,o.a.createElement(P.a,null,o.a.createElement(g.a,{selectedTeams:l&&[l],initialPots:e,pots:t,currentPotNum:n}),o.a.createElement(T.a,{maxTeams:a,currentPotNum:n,groups:s,possibleGroups:null,airborneTeams:i})),o.a.createElement(k.a,null,o.a.createElement(b.a,{calculating:u,completed:p,selectedTeam:l,pot:r,onPick:this.onTeamBallPick}),o.a.createElement(w.a,{long:!0,calculating:m,completed:p,selectedTeam:l,pickedGroup:c,possibleGroups:null,numGroups:s.length,reset:this.onReset})))}}}});