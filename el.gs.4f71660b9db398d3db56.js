webpackJsonp(["el.gs"],{84:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a(70),n=a(0),r=a.n(n),o=a(55),l=a.n(o),i=a(97),c=a.n(i),u=a(174),m=(a.n(u),a(50)),p=(a.n(m),a(42)),h=(a.n(p),a(57)),g=a(47),d=a(58),T=a(114),P=a(59),k=a(60),b=a(61),w=a(62),G=a(46),C=a(117),E=a.n(C);t.default=class extends n.PureComponent{constructor(e){super(e),this.onReset=(()=>{this.reset(!1)}),this.onTeamBallPick=(e=>{const{groups:t,pots:a,currentPotNum:s}=this.state,n=a[s],r=n.slice(),o=n.splice(e,1)[0];this.setState({hungPot:r,selectedTeam:o,pickedGroup:null,calculating:!0},()=>{this.setLongCalculating(this.state)}),this.worker.postMessage({pots:a,groups:t,selectedTeam:o,currentPotNum:s})}),this.workerOnMessage=(e=>{const{selectedTeam:t,pickedGroup:a}=e.data,{groups:s,pots:n,currentPotNum:r}=this.state;s[a].push(t);const o=n[r].length>0?r:r+1,l=o>=n.length;l&&this.worker.terminate(),this.state.airborneTeams.push(t);const i=this.animateCell(t,a);this.setState({groups:s,selectedTeam:null,pickedGroup:a,hungPot:n[o],currentPotNum:o,calculating:!1,longCalculating:!1,completed:l,airborneTeams:this.state.airborneTeams},async()=>{await i,this.setState({airborneTeams:this.state.airborneTeams.filter(e=>e!==t)})})}),this.reset(!0)}componentWillUnmount(){this.worker&&this.worker.terminate()}reset(e){this.worker&&this.worker.terminate(),this.worker=new E.a,this.worker.onmessage=this.workerOnMessage;const t=this.props.pots,a=t.map(e=>m(e)),s=a[0],n={drawId:p("draw-"),initialPots:t,pots:a,groups:s.map(e=>[]),maxTeamsInGroup:a.length,airborneTeams:[],currentPotNum:0,selectedTeam:null,pickedGroup:null,hungPot:s,calculating:!1,longCalculating:!1,completed:!1,error:null};e?this.state=n:this.setState(n)}async setLongCalculating(e){var{airborneTeams:t}=e,a=s.a(e,["airborneTeams"]);await l()(3e3);const n=u(this.state,"airborneTeams");c()(n,a)&&this.setState({longCalculating:!0})}animateCell(e,t){const{currentPotNum:a}=this.state;if(!e)return;const s=document.querySelector(`[data-cellid='${e.id}']`),n=`[data-cellid='${Object(g.a)(t)}${a}']`,r=document.querySelector(n);return s instanceof HTMLElement&&r instanceof HTMLElement?Object(h.a)(s,r,350):void 0}render(){const{initialPots:e,pots:t,groups:a,maxTeamsInGroup:s,currentPotNum:n,hungPot:o,airborneTeams:l,selectedTeam:i,pickedGroup:c,calculating:u,longCalculating:m,completed:p}=this.state;return r.a.createElement(G.default,null,r.a.createElement(P.a,null,r.a.createElement(d.a,{selectedTeams:i&&[i],initialPots:e,pots:t,currentPotNum:n}),r.a.createElement(T.a,{maxTeams:s,currentPotNum:n,groups:a,possibleGroups:null,airborneTeams:l})),r.a.createElement(k.a,null,r.a.createElement(b.a,{calculating:u,completed:p,selectedTeam:i,pot:o,onPick:this.onTeamBallPick}),r.a.createElement(w.a,{long:!0,calculating:m,completed:p,selectedTeam:i,pickedGroup:c,possibleGroups:null,numGroups:a.length,reset:this.onReset})))}}}});